<#@ Assembly Name="System.Core.dll" #>
<#@ Assembly Name="System.Windows.Forms.dll" #>
<#@ assembly name="System.ServiceModel.dll"#>
<#@ assembly name="System.Runtime.Serialization.dll"#>
<#@ Assembly Name="$(SolutionDir)UniCloud.Component.Server\Application\UniCloud.DataObjects.Component\bin\$(ConfigurationName)\UniCloud.DataObjects.Component.dll" #>
<#@ import namespace="System" #>
<#@ import namespace="System.Reflection" #>
<#@ import namespace="System.IO" #>
<#@ import namespace="System.Text" #>
<#@ import namespace="System.Linq" #>
<#@ import namespace="System.Collections.Generic" #> 
<#@ import namespace="System.ServiceModel"#>
<#@ include file="Common.tt"#>
// ******************************************************
// DO NOT CHANGE THE CONTENT OF THIS FILE
// This file was generated by the T4 engine and the 
// contents of this source code will be changed after
// the custom tool was run.
// ******************************************************
using System;
using System.Runtime.Serialization;

namespace UniCloud.DataObjects.Silverlight
{
<#
      string AssemblyPath=@"E:\FZTFS\AcHRS\AirComponent\AirCraftComponent\01_SCL\05_Code\Dev\Solution\UniCloud.Component.Server\Application\UniCloud.DataObjects.Component\bin\Debug\UniCloud.DataObjects.Component.dll";
       Assembly ase = Assembly.LoadFrom(AssemblyPath);
       var types = ase.GetTypes().Where(a=>!a.Name.StartsWith("I"));
       foreach (var item in types)
       {
		 StringBuilder sb = new StringBuilder();
		 sb.AppendLine(@"using System;");
	     sb.AppendLine(@"using System.Runtime.Serialization;");
		 sb.AppendLine();
		 sb.AppendLine(@"namespace UniCloud.DataObjects.Silverlight");
         sb.AppendLine("{");
		 // [DataContractAttribute(Name = "AttactDocumentDataObject", IsReference = false, Namespace = "http://schemas.datacontract.org/2004/07/UniCloud.DataObjects")]
		 sb.AppendLine(@"[DataContractAttribute(Name ="""+item.Name+"\","+
		 "IsReference = false,Namespace =\""+
		 "http://schemas.datacontract.org/2004/07/UniCloud.DataObjects"+"\""+")]");
		 sb.AppendLine(@"public class "+item.Name+" : BaseDataObject");
		 sb.AppendLine("{");
		 PropertyInfo[] propertyInfos = item.GetProperties();
         foreach (var p in propertyInfos)
         {
			 sb.AppendLine(@"private "+GetTypeName(p.PropertyType)+" "+p.Name+"Field;");
			 sb.AppendLine(@"/// <summary>");
			 sb.AppendLine(@"///");
			 sb.AppendLine(@"/// </summary>");
			 sb.AppendLine(@"[DataMemberAttribute()]");
			 sb.AppendLine(@"public "+GetTypeName(p.PropertyType)+" "+p.Name);
			 sb.AppendLine(@"{");
			 sb.AppendLine(@"get");
			 sb.AppendLine(@"{");
			 sb.AppendLine(@"return this."+p.Name+"Field;");
			 sb.AppendLine(@"}");
			 sb.AppendLine(@"set");
			 sb.AppendLine(@"{");
			 sb.AppendLine(@"if (this."+p.Name+"Field != value)");
			 sb.AppendLine(@"{");
			 sb.AppendLine(@"this."+p.Name+"Field = value;");
			 sb.AppendLine(@"this.RaisePropertyChanged("""+p.Name+"\""+");");
			 sb.AppendLine(@"}");
			 sb.AppendLine(@"}");
			 sb.AppendLine(@"}");
			 sb.AppendLine();
         }
		 sb.AppendLine("}");
		 sb.AppendLine();
		  sb.AppendLine(@"[CollectionDataContractAttribute(Name ="""+item.Name+"List\","+
		 "ItemName =\""+item.Name+"\","+
		 "IsReference = false,Namespace =\""+
		 "http://schemas.datacontract.org/2004/07/UniCloud.DataObjects"+"\""+")]");
		 sb.AppendLine("public class "+item.Name+"List : BaseDataObjectList<"+item.Name+">");
		 sb.AppendLine("{");
		 sb.AppendLine("}");
	     sb.AppendLine("}");
		 File.WriteAllText("D:\\GenerateCode\\"+ item.Name + ".cs", sb.ToString());
       }#>

	   //Readme
	   //作用： 根据UniCloud.DataObjects.Component生成对应的UniCloud.DataObjects.Component.Silverlight
	   //使用方法：修改AssemblyPath 的值为你当前项目中UniCloud.DataObjects.Component.dll 的路径
	   //新建文件夹：D:\GenerateCode
	
}